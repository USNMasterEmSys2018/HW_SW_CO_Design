/*
 * Buzzer.cpp
 *
 *  Created on: Mar 13, 2019
 *      Author: Bozhao Liu
 */

#include "Buzzer.h"
#include "xgpio.h"
#include "xparameters.h"
#include <unistd.h>

Buzzer::Buzzer() {
	// TODO Auto-generated constructor stub
	XGpio_Config *Buzzer_Config;

	Buzzer_Config = XGpio_LookupConfig(XPAR_PMODACL2_0_DEVICE_ID);
	XGpio_CfgInitialize(&Buzz, Buzzer_Config, Buzzer_Config->BaseAddress);
	//XGpio_DiscreteWrite((Buzzer_Config->BaseAddress, 2, );

	XGpio_SetDataDirection(&Buzz, 1, 0);
}

void Buzzer::Sing(int Freq)
{
	int delay = 1000000000/Freq/2; //us
	int en = 1;
	for(int i = 0; i < Freq*2; i++)
	{

		usleep(delay);
		en = 1 - en;
	}
}

Buzzer::~Buzzer() {
	// TODO Auto-generated destructor stub
}

